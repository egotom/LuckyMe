var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?void 0:+t}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t,e){(null!=e||t.value)&&(t.value=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let k;function b(t){k=t}function $(t){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.on_mount.push(t)}const w=[],x=[],q=[],_=[],O=Promise.resolve();let M=!1;function E(t){q.push(t)}let T=!1;const L=new Set;function S(){if(!T){T=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];b(e),C(e.$$)}for(w.length=0;x.length;)x.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];L.has(e)||(L.add(e),e())}q.length=0}while(w.length);for(;_.length;)_.pop()();M=!1,T=!1,L.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const z=new Set;let N;function A(t,e){t&&t.i&&(z.delete(t),t.i(e))}function j(t,e,n,o){if(t&&t.o){if(z.has(t))return;z.add(t),N.c.push(()=>{z.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const B="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function H(t,n,l){const{fragment:s,on_mount:r,on_destroy:u,after_update:i}=t.$$;s&&s.m(n,l),E(()=>{const n=r.map(e).filter(c);u?u.push(...n):o(n),t.$$.on_mount=[]}),i.forEach(E)}function I(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(w.push(t),M||(M=!0,O.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(e,c,l,s,r,i,a=[-1]){const f=k;b(e);const d=c.props||{},p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:a};let h=!1;if(p.ctx=l?l(e,d,(t,n,...o)=>{const c=o.length?o[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=c)&&(p.bound[t]&&p.bound[t](c),h&&J(e,t)),n}):[],p.update(),h=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();c.intro&&A(e.$$.fragment),H(e,c.target,c.anchor),S()}b(f)}class P{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const D=[];function G(e){let n,o,c,l,i,g,v,k,b,$,w,x,q,_,O,M,E,T,L,S,C=e[0].dpt+"",z=e[0].name+"",N=e[0].no+"",A=e[0].desc+"",j=e[0].ts+"";return{c(){n=a("div"),o=a("div"),c=a("div"),l=f(C),i=f("-"),g=f(z),v=d(),k=a("div"),b=f("序列号："),$=f(N),w=d(),x=a("div"),q=f(A),_=d(),O=a("div"),M=a("div"),E=d(),T=a("div"),L=f(j),h(c,"class","to"),h(k,"class","no"),h(o,"class","hd svelte-1i8c8xz"),h(x,"class","why svelte-1i8c8xz"),h(T,"class","ts"),h(O,"class","hd svelte-1i8c8xz"),h(n,"class","tkt svelte-1i8c8xz"),y(n,"gr",e[0].green)},m(t,u,a){r(t,n,u),s(n,o),s(o,c),s(c,l),s(c,i),s(c,g),s(o,v),s(o,k),s(k,b),s(k,$),s(n,w),s(n,x),s(x,q),s(n,_),s(n,O),s(O,M),s(O,E),s(O,T),s(T,L),a&&S(),S=p(n,"click",e[2])},p(t,[e]){1&e&&C!==(C=t[0].dpt+"")&&m(l,C),1&e&&z!==(z=t[0].name+"")&&m(g,z),1&e&&N!==(N=t[0].no+"")&&m($,N),1&e&&A!==(A=t[0].desc+"")&&m(q,A),1&e&&j!==(j=t[0].ts+"")&&m(L,j),1&e&&y(n,"gr",t[0].green)},i:t,o:t,d(t){t&&u(n),S()}}}function K(t,e,n){let{tick:o={dpt:"",name:"",no:"",desc:"",ts:"",green:!0}}=e,{addOne:c=null}=e;return t.$set=t=>{"tick"in t&&n(0,o=t.tick),"addOne"in t&&n(1,c=t.addOne)},[o,c,()=>c(o)]}class Q extends P{constructor(t){super(),F(this,t,K,G,l,{tick:0,addOne:1})}}const{window:R}=B;function U(t,e,n){const o=t.slice();return o[24]=e[n],o}function V(t,e,n){const o=t.slice();return o[27]=e[n],o}function W(t){let e,n,o,c,l,i,g,v,y,k,b,$,w,x,q,_,O,M,E=t[2].dpt+"",T=t[2].name+"",L=t[2].no+"",S=t[2].desc+"",C=t[2].ts+"";return{c(){e=a("div"),n=a("div"),o=a("div"),c=a("div"),l=a("p"),i=f(E),g=f(" - "),v=f(T),y=d(),k=a("p"),b=f(L),$=d(),w=a("p"),x=f(S),q=d(),_=a("p"),O=f(C),h(l,"class","who svelte-ykcqu3"),h(k,"class","sel svelte-ykcqu3"),h(w,"class","why svelte-ykcqu3"),h(_,"class","when svelte-ykcqu3"),h(c,"class","info svelte-ykcqu3"),h(o,"class","modal svelte-ykcqu3"),h(n,"class","back svelte-ykcqu3"),h(e,"class","backdrop svelte-ykcqu3")},m(u,a,f){r(u,e,a),s(e,n),s(n,o),s(o,c),s(c,l),s(l,i),s(l,g),s(l,v),s(c,y),s(c,k),s(k,b),s(c,$),s(c,w),s(w,x),s(c,q),s(c,_),s(_,O),f&&M(),M=p(o,"click",t[9])},p(t,e){4&e&&E!==(E=t[2].dpt+"")&&m(i,E),4&e&&T!==(T=t[2].name+"")&&m(v,T),4&e&&L!==(L=t[2].no+"")&&m(b,L),4&e&&S!==(S=t[2].desc+"")&&m(x,S),4&e&&C!==(C=t[2].ts+"")&&m(O,C)},d(t){t&&u(e),M()}}}function X(t){let e,n,o,c,l=t[27]+"";function i(...e){return t[23](t[27],...e)}return{c(){e=a("li"),n=a("b"),o=f(l),h(n,"class","svelte-ykcqu3")},m(t,l,u){r(t,e,l),s(e,n),s(n,o),u&&c(),c=p(n,"click",i)},p(e,n){t=e,2&n&&l!==(l=t[27]+"")&&m(o,l)},d(t){t&&u(e),c()}}}function Y(t){let e,n,o;const c=new Q({props:{tick:t[24],addOne:t[8]}});return{c(){var t;e=a("div"),(t=c.$$.fragment)&&t.c(),n=d()},m(t,l){r(t,e,l),H(c,e,null),s(e,n),o=!0},p(t,e){const n={};1&e&&(n.tick=t[24]),c.$set(n)},i(t){o||(A(c.$$.fragment,t),o=!0)},o(t){j(c.$$.fragment,t),o=!1},d(t){t&&u(e),I(c)}}}function Z(t){let e,n,c,l,f,m,y,k,b,$,w,x,q,_,O,M,E,T,L,S,C,z,B,H,I,J=t[3]&&W(t),F=t[1],P=[];for(let e=0;e<F.length;e+=1)P[e]=X(V(t,F,e));let D=t[0],G=[];for(let e=0;e<D.length;e+=1)G[e]=Y(U(t,D,e));const K=t=>j(G[t],1,1,()=>{G[t]=null});return{c(){e=a("main"),J&&J.c(),n=d(),c=a("div"),l=a("div"),f=a("span"),f.textContent="获奖人数：",m=a("input"),y=d(),k=a("br"),b=d(),$=a("button"),$.textContent="开 始",w=d(),x=a("br"),q=d(),_=a("button"),_.textContent="停 止",O=d(),M=a("ul"),E=a("p"),E.innerHTML='<b style="color:red" class="svelte-ykcqu3">已中奖序列号：</b>',T=d();for(let t=0;t<P.length;t+=1)P[t].c();L=d(),S=a("div"),S.innerHTML='<a href="https://github.com/egotom/LuckyMe/tree/dev" target="_blank">开放源代码: https://github.com/egotom/LuckyMe</a>',C=d(),z=a("div"),B=a("div");for(let t=0;t<G.length;t+=1)G[t].c();h(f,"class","label svelte-ykcqu3"),h(m,"type","number"),h(m,"id","luckMax"),h(m,"class","w70 svelte-ykcqu3"),h($,"class","svelte-ykcqu3"),h(_,"id","stoprun"),h(_,"class","svelte-ykcqu3"),h(M,"class","luckMe svelte-ykcqu3"),h(S,"class","open svelte-ykcqu3"),h(B,"class","bod svelte-ykcqu3"),h(c,"class","dash svelte-ykcqu3")},m(u,i,a){r(u,e,i),J&&J.m(e,null),s(e,n),s(e,c),s(c,l),s(l,f),s(l,m),v(m,t[4]),s(l,y),s(l,k),s(l,b),s(l,$),s(l,w),s(l,x),s(l,q),s(l,_),s(l,O),s(l,M),s(M,E),s(M,T);for(let t=0;t<P.length;t+=1)P[t].m(M,null);s(l,L),s(l,S),s(c,C),s(c,z),s(z,B);for(let t=0;t<G.length;t+=1)G[t].m(B,null);H=!0,a&&o(I),I=[p(R,"keydown",t[10]),p(m,"keyup",t[5]),p(m,"input",t[22]),p($,"click",t[7]),p(_,"click",t[6])]},p(t,[c]){if(t[3]?J?J.p(t,c):(J=W(t),J.c(),J.m(e,n)):J&&(J.d(1),J=null),16&c&&g(m.value)!==t[4]&&v(m,t[4]),514&c){let e;for(F=t[1],e=0;e<F.length;e+=1){const n=V(t,F,e);P[e]?P[e].p(n,c):(P[e]=X(n),P[e].c(),P[e].m(M,null))}for(;e<P.length;e+=1)P[e].d(1);P.length=F.length}if(257&c){let e;for(D=t[0],e=0;e<D.length;e+=1){const n=U(t,D,e);G[e]?(G[e].p(n,c),A(G[e],1)):(G[e]=Y(n),G[e].c(),A(G[e],1),G[e].m(B,null))}for(N={r:0,c:[],p:N},e=D.length;e<G.length;e+=1)K(e);N.r||o(N.c),N=N.p}},i(t){if(!H){for(let t=0;t<D.length;t+=1)A(G[t]);H=!0}},o(t){G=G.filter(Boolean);for(let t=0;t<G.length;t+=1)j(G[t]);H=!1},d(t){t&&u(e),J&&J.d(),i(P,t),i(G,t),o(I)}}}function tt(e,n,o){let c=[],s=[],r=[],u=[],i=0,a=!1,f="B",d=1,p=5,h=null;const m=function(e,n=t){let o;const c=[];function s(t){if(l(e,t)&&(e=t,o)){const t=!D.length;for(let t=0;t<c.length;t+=1){const n=c[t];n[1](),D.push(n,e)}if(t){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,r=t){const u=[l,r];return c.push(u),1===c.length&&(o=n(s)||t),l(e),()=>{const t=c.indexOf(u);-1!==t&&c.splice(t,1),0===c.length&&(o(),o=null)}}}}(JSON.parse(localStorage.getItem("luckMe"))||[]);function v(){o(0,c=[]);for(let t=0;t<p;t++)c.push({dpt:"",name:"",desc:"",ts:"",no:"",green:!0})}function y(){window.clearTimeout(h),h=null}function k(t){if(o(3,a=!a),"string"==typeof t){o(2,u=null);for(let e in r)if(t==r[e][0]){o(2,u={dpt:r[e][2],name:r[e][3],desc:r[e][4],ts:r[e][5],no:r[e][0]});break}}}let b,w;m.subscribe(t=>{o(1,s=t)}),$(async()=>{const t=await fetch("http://120.26.118.222:5000/rflyts/6");let e=await t.json();d=e.sn+1,f=e.lst[0][0].split("-")[0],r=e.lst,i=e.lst.length,v()});return[c,s,u,a,p,v,y,function t(){i-s.length-p<0&&(window.clearTimeout(h),h=null,alert("剩余奖券不足！")),o(0,c=[]);let e=[];h=window.setTimeout(t,20);for(let t=0;t<p;){let n=f+"-"+Math.floor(Math.random()*d);if(s.indexOf(n)>-1||e.indexOf(n)>-1)continue;let o=r.filter(t=>t[0]===n)[0];null!=o&&(c.push({dpt:o[1],name:o[2],desc:o[3],ts:o[4],no:o[0],green:!1}),e.push(n),t++)}document.querySelector("#stoprun").focus()},function(t){for(let e in c)c[e].no==t.no&&o(0,c[e].green=!0,c);o(3,a=!a),o(2,u=t),o(1,s=[t.no,...s]),localStorage.setItem("luckMe",JSON.stringify(s))},k,function(t){b=t.key,w=t.keyCode,13===w&&y()},r,i,f,d,h,b,w,!1,"","",m,function(){p=g(this.value),o(4,p)},t=>k(t)]}return new class extends P{constructor(t){super(),F(this,t,tt,Z,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
